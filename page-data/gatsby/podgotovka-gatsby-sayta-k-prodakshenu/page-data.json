{"componentChunkName":"component---src-templates-blog-post-js","path":"/gatsby/podgotovka-gatsby-sayta-k-prodakshenu/","result":{"data":{"site":{"id":"Site","siteMetadata":{"title":"jinv.ru"}},"markdownRemark":{"id":"c2416004-69a6-5a41-9154-c393dc9a710b","excerpt":"Это последняя статья из серии “Учебник Gatsby для начинающих” В предыдущих частях вы изучили следующее: создание сайтов Gatsby создание страниц и компонентов…","html":"<p>Это последняя статья из серии “Учебник Gatsby для начинающих”</p>\n<p>В предыдущих частях вы изучили следующее:</p>\n<ul>\n<li>создание сайтов Gatsby</li>\n<li>создание страниц и компонентов</li>\n<li>компоненты стиля</li>\n<li>добавление плагинов на сайт</li>\n<li>данные source и transform</li>\n<li>использование GraphQL для запроса данных</li>\n<li>программное создание страниц из ваших данных</li>\n</ul>\n<p>В этом заключительном разделе вы пройдете через некоторые общие шаги по подготовке сайта к работе, изучите мощный инструмент диагностики сайта под названием <a href=\"https://developers.google.com/web/tools/lighthouse/\">Lighthouse</a>. Попутно мы представим еще несколько плагинов, которые вы часто будете использовать на своих сайтах Gatsby.</p>\n<h2>Выполнение теста с помощью Lighthouse</h2>\n<p>Цитата с <a href=\"https://developers.google.com/web/tools/lighthouse/\">сайта Lighthouse</a>:</p>\n<blockquote>\n<p>Lighthouse - это автоматизированный инструмент с открытым исходным кодом для улучшения качества веб-страниц. Вы можете запустить его на любой веб-странице, общедоступной или требующей аутентификации. Lighthouse может проверять производительность, доступность, PWA, и многое другое.</p>\n</blockquote>\n<p>Lighthouse включен в инструменты разработчика Chrome. Проведение аудита, а затем устранение обнаруженных ошибок и внедрение предложенных улучшений — отличный способ подготовить ваш сайт к работе. Это даст вам уверенность, что ваш сайт будет максимально быстрым и доступным.</p>\n<p>Во-первых, вам нужно создать продакшен сборку вашего Gatsby сайта. Сервер разработки Gatsby оптимизирован для ускорения разработки, но сайт, который он создает, хотя и очень похож на рабочую версию сайта, не совсем оптимизирован.</p>\n<h3>Создание продакшен сборки</h3>\n<ol>\n<li>Остановите сервер разработки (если он все еще работает) и выполните следующую команду:</li>\n</ol>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\">gatsby build</code></pre></div>\n<p>Эта команда делает продакшен сборку вашего сайта и выводит статические файлы в каталог <code class=\"language-text\">public</code>.</p>\n<ol start=\"2\">\n<li>Чтобы просмотреть продакшен сайт локально, выполните:</li>\n</ol>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\">gatsby serve</code></pre></div>\n<p>После ввода этой команды, вы можете просмотреть свой сайт по адресу <a href=\"http://localhost:9000\">http://localhost:9000</a>.</p>\n<h3>Выполнение теста с помощью Lighthouse</h3>\n<p>Теперь вы можете выполнить тест с помощью Lighthouse.</p>\n<ol>\n<li>Откройте сайт с помощью браузера Chrome в режиме Инкогнито, чтобы никакие расширения не мешали тесту. Затем, откройте в Хроме инструменты разработчика (DevTools).</li>\n<li>Нажмите на вкладку “Audits”, где вы увидите экран, который выглядит следующим образом:</li>\n</ol>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 501px;\"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/67e5fbd197ee004e26115ba5c8d25932/55811/lighthouse-audit.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 34.3313373253493%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAHCAYAAAAIy204AAAACXBIWXMAAAsSAAALEgHS3X78AAABKUlEQVQoz31QvU7DMBjM8zHwCLxAHwGJpQPqwIiQECOCATEglYmBhSJgYEMqmPw4TmjSOElL2gKKncN20kgUtSedbH2+u+/zZ2ENKlmZc3if4uaI4DMXdb2qsAnWvyBlWIaFDDjr3OJpu4PTLjU1KapasybYWj62IkXZBBYTYLB7jXhrB/391zqwlFj11NwwoUY+FXgcSgyuCO56fTw8z/HilFqBpu+qEVU9oYQQQk0l/3SyWYm9wxQH53P0LgS6xzlOLqeNV5pgIWufbMK035rNClAWYpxwMBbApT7eiK3uDO+OA8+joK4LQgg830cYJKBepBgjCCNEcYyEp+3PzA51F7OzolDBCcKPkRHxNEOaZeCcK+MY+WSCEf1CYGsu8PMt9QLa32n8Am9cFKDhfrUwAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"Запуск теста на Lighthouse\"\n        title=\"Запуск теста на Lighthouse\"\n        src=\"/static/67e5fbd197ee004e26115ba5c8d25932/55811/lighthouse-audit.png\"\n        srcset=\"/static/67e5fbd197ee004e26115ba5c8d25932/12f09/lighthouse-audit.png 148w,\n/static/67e5fbd197ee004e26115ba5c8d25932/e4a3f/lighthouse-audit.png 295w,\n/static/67e5fbd197ee004e26115ba5c8d25932/55811/lighthouse-audit.png 501w\"\n        sizes=\"(max-width: 501px) 100vw, 501px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<ol start=\"3\">\n<li>Нажмите кнопку “Generate report” (по умолчанию должны быть выбраны все доступные типы теста). Затем потребуется минута или около того, чтобы выполнить тест. После завершения теста вы должны увидеть результаты, которые выглядят следующим образом:</li>\n</ol>\n<p><img src=\"lighthouse-audit-results.png\" alt=\"Результаты теста Lighthouse\"></p>\n<p>Как видите, производительность Gatsby из коробки превосходная, но вам не хватает некоторых вещей для PWA, Accessibility, Best Practices и SEO, которые улучшат ваши результаты (и в дальнейшем сделают ваш сайт намного более дружелюбным для посетителей и поисковых систем).</p>\n<h2>Добавление файла манифеста</h2>\n<p>Похоже, у вас довольно скромная оценка в категории “Progressive Web App”. Давайте разберемся с этим.</p>\n<p>Но для начала, что такое PWA?</p>\n<p>Это обычные веб-сайты, которые используют функциональность современных браузеров, чтобы улучшить работу веб с помощью особенностей и эффектов, которые присущи обычным приложениям. Ознакомьтесь с <a href=\"https://developers.google.com/web/progressive-web-apps/\">обзором в Google</a> о том, что определяет работу PWA.</p>\n<p>Включение манифеста веб-приложения является одним из трех общепринятых <a href=\"https://alistapart.com/article/yes-that-web-project-should-be-a-pwa#section1\">базовых требований для PWA</a>.</p>\n<p>Цитата от <a href=\"https://developers.google.com/web/fundamentals/web-app-manifest/\">Google</a>:</p>\n<blockquote>\n<p>Манифест веб-приложения - это простой JSON-файл, который сообщает браузеру о вашем веб-приложении и о том, как оно должно вести себя при “установке” на пользовательском мобильном устройстве или компьютере.</p>\n</blockquote>\n<p><a href=\"https://www.gatsbyjs.org/packages/gatsby-plugin-manifest/\">Плагин манифеста Gatsby</a> настраивает Gatsby для создания файла <code class=\"language-text\">manifest.webmanifest</code> для каждой сборки сайта.</p>\n<h3>Использование gatsby-plugin-manifest</h3>\n<ol>\n<li>Установите плагин:</li>\n</ol>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\"><span class=\"token function\">npm</span> <span class=\"token function\">install</span> --save gatsby-plugin-manifest</code></pre></div>\n<ol start=\"2\">\n<li>Добавьте фавиконку для вашего приложения в <code class=\"language-text\">src/images/icon.png</code>. Еси у вас нет своей иконки, то для данного урока вы можете воспользоваться <a href=\"https://raw.githubusercontent.com/gatsbyjs/gatsby/master/docs/tutorial/part-eight/icon.png\">этой иконкой</a>. Икона необходима для построения всех изображений для манифеста. Для получения дополнительной информации обратитесь к документации по <a href=\"https://github.com/gatsbyjs/gatsby/blob/master/packages/gatsby-plugin-manifest/README.md\"><code class=\"language-text\">gatsby-plugin-manifest</code></a></li>\n<li>Добавьте плагин в массив <code class=\"language-text\">plugins</code> файла <code class=\"language-text\">gatsby-config.js</code>.</li>\n</ol>\n<div class=\"gatsby-highlight\" data-language=\"javascript:title=gatsby-config.js\"><pre class=\"language-javascript:title=gatsby-config.js\"><code class=\"language-javascript:title=gatsby-config.js\">{\n  plugins: [\n    {\n      resolve: `gatsby-plugin-manifest`,\n      options: {\n        name: `GatsbyJS`,\n        short_name: `GatsbyJS`,\n        start_url: `/`,\n        background_color: `#6b37bf`,\n        theme_color: `#6b37bf`,\n        // Enables &quot;Add to Homescreen&quot; prompt and disables browser UI (including back button)\n        // see https://developers.google.com/web/fundamentals/web-app-manifest/#display\n        display: `standalone`,\n        icon: `src/images/icon.png`, // This path is relative to the root of the site.\n      },\n    },\n  ]\n}</code></pre></div>\n<p>Это все, что вам необходимо, чтобы начать работу с добавлением веб-манифеста на Gatsby сайт. Приведенный пример отражает лишь базовую конфигурацию.  Про дополнительные возможности читайте <a href=\"https://www.gatsbyjs.org/packages/gatsby-plugin-manifest/?=gatsby-plugin-manifest#automatic-mode\">справку о плагине</a>.</p>\n<h2>Добавление офлайн поддержки</h2>\n<p>Еще одно требование к веб-сайту, чтобы квалифицироваться как PWA, - это использование <a href=\"https://developer.mozilla.org/en-US/docs/Web/API/Service_Worker_API\">Service Worker</a>. Service Worker работает в фоновом режиме и, в зависимости от подключения к сети, решает, обслуживать сетевое или кэшированное содержимое, что обеспечивает бесперебойную управляемую автономную работу.</p>\n<p><a href=\"https://www.gatsbyjs.org/packages/gatsby-plugin-offline/\">Gatsby плагин офлайн</a> делает Gatsby сайт автономным и более устойчивым к плохим сетевым условиям, создавая Service Worker для вашего сайта.</p>\n<h3>Использование gatsby-plugin-offline</h3>\n<ol>\n<li>Установите плагин:</li>\n</ol>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\"><span class=\"token function\">npm</span> <span class=\"token function\">install</span> --save gatsby-plugin-offline</code></pre></div>\n<ol start=\"2\">\n<li>Добавьте плагин в массив <code class=\"language-text\">plugins</code> файла <code class=\"language-text\">gatsby-config.js</code>.</li>\n</ol>\n<div class=\"gatsby-highlight\" data-language=\"javascript:title=gatsby-config.js\"><pre class=\"language-javascript:title=gatsby-config.js\"><code class=\"language-javascript:title=gatsby-config.js\">{\n  plugins: [\n    {\n      resolve: `gatsby-plugin-manifest`,\n      options: {\n        name: `GatsbyJS`,\n        short_name: `GatsbyJS`,\n        start_url: `/`,\n        background_color: `#6b37bf`,\n        theme_color: `#6b37bf`,\n        // Enables &quot;Add to Homescreen&quot; prompt and disables browser UI (including back button)\n        // see https://developers.google.com/web/fundamentals/web-app-manifest/#display\n        display: `standalone`,\n        icon: `src/images/icon.png`, // This path is relative to the root of the site.\n      },\n    },\n    // highlight-next-line\n    `gatsby-plugin-offline`,\n  ]\n}</code></pre></div>\n<p>Это все, что вам нужно, для работы с Service Worker с помощью Gatsby.</p>\n<p>Офлайн плагин должен быть указан после плагина манифеста, чтобы офлайн плагин мог кэшировать созданный <code class=\"language-text\">manifest.webmanifest</code>.</p>\n<h2>Добавление метаданных страницы</h2>\n<p>Добавление метаданных на страницы (таких как заголовок или описание) является ключевым фактором, помогающим поисковым системам, таким как Google, понять ваш контент и решить, когда его следует отображать в результатах поиска.</p>\n<p><a href=\"https://github.com/nfl/react-helmet\">React Helmet</a> - это пакет, который содержит интерфейс React компонента, чтобы управлять <a href=\"https://developer.mozilla.org/en-US/docs/Web/HTML/Element/head\">заголовком документа</a>.</p>\n<p>Gatsby обеспечивает поддержку <a href=\"https://www.gatsbyjs.org/packages/gatsby-plugin-react-helmet/\">плагина react helmet</a> для отображения данных сервера, добавленных с помощью React Helmet. С помощью плагина атрибуты, которые вы добавляете в React Helmet, будут добавлены к статическим HTML-страницам, которые создает Gatsby.</p>\n<h3>Использование <code class=\"language-text\">React Helmet</code> и <code class=\"language-text\">gatsby-plugin-react-helmet</code></h3>\n<ol>\n<li>Установите оба пакета:</li>\n</ol>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\"><span class=\"token function\">npm</span> <span class=\"token function\">install</span> --save gatsby-plugin-react-helmet react-helmet</code></pre></div>\n<ol start=\"2\">\n<li>Добавьте плагин в массив <code class=\"language-text\">plugins</code> файла <code class=\"language-text\">gatsby-config.js</code></li>\n</ol>\n<div class=\"gatsby-highlight\" data-language=\"javascript:title=gatsby-config.js\"><pre class=\"language-javascript:title=gatsby-config.js\"><code class=\"language-javascript:title=gatsby-config.js\">{\n  plugins: [\n    {\n      resolve: `gatsby-plugin-manifest`,\n      options: {\n        name: `GatsbyJS`,\n        short_name: `GatsbyJS`,\n        start_url: `/`,\n        background_color: `#6b37bf`,\n        theme_color: `#6b37bf`,\n        // Enables &quot;Add to Homescreen&quot; prompt and disables browser UI (including back button)\n        // see https://developers.google.com/web/fundamentals/web-app-manifest/#display\n        display: `standalone`,\n        icon: `src/images/icon.png`, // This path is relative to the root of the site.\n      },\n    },\n    `gatsby-plugin-offline`,\n    // highlight-next-line\n    `gatsby-plugin-react-helmet`,\n  ]\n}</code></pre></div>\n<ol start=\"3\">\n<li>Используйте <code class=\"language-text\">React Helmet</code> на стрранице:</li>\n</ol>\n<div class=\"gatsby-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token keyword\">import</span> React <span class=\"token keyword\">from</span> <span class=\"token string\">\"react\"</span>\n<span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> Helmet <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">\"react-helmet\"</span>\n\n<span class=\"token keyword\">class</span> <span class=\"token class-name\">Application</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">React<span class=\"token punctuation\">.</span>Component</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token function\">render</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n      <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span> <span class=\"token attr-name\">className</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>application<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\"></span>\n<span class=\"gatsby-highlight-code-line\"><span class=\"token plain-text\">        </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Helmet</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\"></span></span><span class=\"gatsby-highlight-code-line\"><span class=\"token plain-text\">          </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>meta</span> <span class=\"token attr-name\">charSet</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>utf-8<span class=\"token punctuation\">\"</span></span> <span class=\"token punctuation\">/></span></span><span class=\"token plain-text\"></span></span><span class=\"gatsby-highlight-code-line\"><span class=\"token plain-text\">          </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>title</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">My Title</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>title</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\"></span></span><span class=\"gatsby-highlight-code-line\"><span class=\"token plain-text\">          </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>link</span> <span class=\"token attr-name\">rel</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>canonical<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">href</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>http://mysite.com/example<span class=\"token punctuation\">\"</span></span> <span class=\"token punctuation\">/></span></span><span class=\"token plain-text\"></span></span><span class=\"gatsby-highlight-code-line\"><span class=\"token plain-text\">        </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span><span class=\"token class-name\">Helmet</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\"></span></span><span class=\"gatsby-highlight-code-line\"><span class=\"token plain-text\">        ...</span></span><span class=\"token plain-text\">      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span>\n    <span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>Приведенный выше пример взят из <a href=\"https://github.com/nfl/react-helmet#example\">React Helmet docs</a>.</p>\n<h2>Дальнейшие действия</h2>\n<h3>Официальная документация</h3>\n<ul>\n<li><a href=\"https://www.gatsbyjs.org/docs/\">Официальная документация</a>: просмотрите нашу официальную документацию по <em><a href=\"https://www.gatsbyjs.org/docs/quick-start/\">Быстрый старт</a></em>, <em><a href=\"https://www.gatsbyjs.org/docs/preparing-your-environment/\">Подробные руководства</a></em>, <em><a href=\"https://www.gatsbyjs.org/docs/gatsby-link/\">ссылки на API</a></em>, и многое другое.</li>\n</ul>\n<h3>Официальные Плагины</h3>\n<ul>\n<li><a href=\"https://github.com/gatsbyjs/gatsby/tree/master/packages\">Официальные Плагины</a>: Полный список всех официальных плагинов, поддерживаемых Gatsby.</li>\n</ul>\n<h3>Официальные Стартеры</h3>\n<ol>\n<li><a href=\"https://github.com/gatsbyjs/gatsby-starter-default\">Gatsby Стартер по умолчанию</a>: Начните свой проект с этого стандартного шаблона. Этот скелетный стартер поставляется с основными конфигурационными файлами Gatsby, которые вам могут понадобиться. <em><a href=\"https://gatsbyjs.github.io/gatsby-starter-default/\">рабочий пример</a></em></li>\n<li><a href=\"https://github.com/gatsbyjs/gatsby-starter-blog\">Gatsby Стартер блога</a>: Gatsby стартер для создания классного и быстрого блога. <em><a href=\"https://gatsbyjs.github.io/gatsby-starter-blog/\">рабочий пример</a></em></li>\n<li><a href=\"https://github.com/gatsbyjs/gatsby-starter-hello-world\">Gatsby Стартер “Hello-World”</a>: Gatsby стартер с голыми предметами первой необходимости, необходимыми для сайта Gatsby. <em><a href=\"https://gatsby-starter-hello-world-demo.netlify.com/\">рабочий пример</a></em></li>\n</ol>\n<p>[Дополнительные руководства] (/tutorial/ additional-tutorials/)</p>\n<ul>\n<li>Ты построил что-нибудь классное? Поделитесь им в Twitter, тег <a href=\"https://twitter.com/search?q=%23buildwithgatsby\">#buildwithgatsby</a>, и <a href=\"https://twitter.com/gatsbyjs\">@упомянуть нас</a>!</li>\n<li>Внести свой вклад! Прогуляйтесь по <a href=\"https://github.com/gatsbyjs/gatsby/issues?q=is%3Aissue+is%3Aopen+label%3A%22help+wanted%22\">открытым вопросам</a> на репо Гэтсби и [стать вкладчиком] (/contributing/how-to-contribute/).</li>\n</ul>\n<p>Проверьте [“как внести свой вклад”] (/contributing/how-to-contribute/) документы для еще большего количества идей.</p>\n<p>Для написания данной статьи использованы следующие материалы:</p>\n<ul>\n<li><a href=\"https://www.gatsbyjs.org/tutorial/part-eight/\">https://www.gatsbyjs.org/tutorial/part-eight/</a></li>\n</ul>","frontmatter":{"title":"Подготовка сайта на фреймворке Gatsby к публикации","date":"09 February 2020","description":"Как подготовить Gatsby сайт к работе. Инструмент диагностики сайта - Lighthouse. Добавление на сайт файла манифеста, офлайн поддержки, метаданных для страниц"}}},"pageContext":{"slug":"/gatsby/podgotovka-gatsby-sayta-k-prodakshenu/","previous":{"fields":{"slug":"/gatsby/tutorial-gatsby/"},"frontmatter":{"title":"Руководство по Gatsby"}},"next":{"fields":{"slug":"/gatsby/gatsby-without-graphql/"},"frontmatter":{"title":"Gatsby без GraphQL"}}}}}