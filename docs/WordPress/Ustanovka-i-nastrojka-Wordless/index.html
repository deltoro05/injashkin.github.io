<!DOCTYPE html>
<html lang="ru">
  <head><!-- Google tag (gtag.js) -->
<script
  async
  src="https://www.googletagmanager.com/gtag/js?id=G-N2DQXFBXY8"
></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag() {
    dataLayer.push(arguments);
  }
  gtag('js', new Date());

  gtag('config', 'G-N2DQXFBXY8');
</script>

    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="/index.1giu2iqfj.css">
    <script defer src="/index.1giu2iqfj.js"></script>
    <meta name="description" content="Установка и настройка микрофреймворка Wordless, который применяется для разработки пользовательских тем для WordPress.">
    <title>Установка и настройка Wordless | jinv.ru</title>
    <link rel="sitemap" type="application/xml" href="/sitemap/sitemap-index.xml">
    <link rel="apple-touch-icon" sizes="57x57" href="images/icons/icon57.png">
    <link rel="apple-touch-icon" sizes="60x60" href="images/icons/icon60.png">
    <link rel="apple-touch-icon" sizes="72x72" href="images/icons/icon72.png">
    <link rel="apple-touch-icon" sizes="76x76" href="images/icons/icon76.png">
    <link rel="apple-touch-icon" sizes="114x114" href="images/icons/icon114.png">
    <link rel="apple-touch-icon" sizes="120x120" href="images/icons/icon120.png">
    <link rel="apple-touch-icon" sizes="144x144" href="images/icons/icon144.png">
    <link rel="apple-touch-icon" sizes="152x152" href="images/icons/icon152.png">
    <link rel="apple-touch-icon" sizes="180x180" href="images/icons/icon180.png">
    <link rel="icon" type="image/png" sizes="192x192" href="images/icons/icon192.png">
    <link rel="icon" href="images/icons/icon16.png" type="image/png" sizes="16x16">
    <link rel="icon" href="images/icons/icon32.png" type="image/png" sizes="32x32">
    <link rel="icon" href="images/icons/icon96.png" type="image/png" sizes="96x96">
    <link rel="manifest" href="/manifest.webmanifest">
    <link rel="stylesheet" href="/highlight/vs2015.min.css">
    <script src="/highlight/highlight.min.js">   </script>
    <script>hljs.configure({noHighlightRe: language-perl})</script>
    <script>hljs.highlightAll()</script>
    <meta name="msapplication-TileColor" content="#ffffff">
    <meta name="msapplication-TileImage" content="images/icons/icon144.png">
    <meta name="theme-color" content="#ffffff">
  </head>
  <body>
    <header class="header">
      <div class="header__content content">           
        <div class="header__logo">
          <div class="logo">        <a href="/" title="jinv.ru"> 
              <svg class="icon icon__logo" role="img" width="14em" height="5em">
                <use href="/sprite.svg#logo"></use>
              </svg></a></div>
          <div class="logo_mobile"><a href="/" title="jinv.ru"><img src="/images/icon-72x72.png" alt="Логотип сайта jinv.ru"/></a></div>
        </div>
        <nav class="menu" aria-label="Главное меню">   
          <div class="content"> 
            <input id="menu__toggle" type="checkbox"/>
            <label class="menu__btn" for="menu__toggle"><span>   </span></label>
            <ul class="menu__box">
              <li><a class="menu__item" href="/">Главная</a></li>
              <li><a class="menu__item" href="/toc.html">Статьи</a></li>
              <li><a class="menu__item" href="/author.html">Об авторе</a></li>
            </ul>
          </div>
        </nav>
        <div class="theme">
          <select id="theme" name="theme">        
            <option value="auto">Авто      </option>
            <option value="light">Светлая      </option>
            <option value="dark">Темная    </option>
          </select>
        </div>
        <div class="header__contacts">
          <div class="send-mes">
            <div class="soc"><a class="mes-tg" href="https://t.me/jashkin" title="Telegram" target="_blank" rel="nofollow">
                <svg class="icon icon__telegram" role="img" width="1em" height="1em">
                  <use href="/sprite.svg#telegram"></use>
                </svg></a><a class="mes-wa" href="https://api.whatsapp.com/send?phone=79183549497" title="WhatsApp" target="_blank" rel="nofollow">
                <svg class="icon icon__whatsapp" role="img" width="1em" height="1em">
                  <use href="/sprite.svg#whatsapp"></use>
                </svg></a>
            </div>
          </div>
          <div class="contacts">         
            <p> <a href="https://github.com/injashkin/injashkin.github.io">Github</a></p>
          </div>
        </div>
      </div>
    </header>
    <div class="content">
      <div class="article">
        <h1>Установка и настройка Wordless</h1>
        <div class="creationDate">Создано: 24-10-2022 - Обновлено: 29-10-2022</div><p><a href="https://wordless.readthedocs.io/en/latest/index.html">Wordless</a> - это микро-фреймворк для разработки пользовательских тем, который представляет из себя плагин для WordPress и содержит стартовую тему. Wordless значительно ускоряет и улучшает создание пользовательских тем. Перечислим особенности Wordless:</p>
<ul>
<li>Создание новых тем с помощью WP-CLI</li>
<li>Написание шаблонов PHP с помощью языка шаблонов PUG</li>
<li>Написание таблиц стилей CSS, используя синтаксис SCSS</li>
<li>Написание логики Javascript, используя синтаксис ES2015</li>
<li>Предварительно настроенная поддержка перехватчика сообщений MailHog.</li>
<li>Поддержка WebPack, BrowserSync (с живой перезагрузкой), WP-CLI, Yarn.</li>
</ul>
<p>Скомпилированная тема будет работать на любой стандартной инсталляции Wordpress.</p>
<p>Wordless не изменяет никаких основных функциональных возможностей, поэтому он совместим практически с любым плагином.</p>
<p>Дальше мы будем исходить из того, что у вас не установлена WordPress.</p>
<p>Вы можете установить Wordless и WordPress одним махом. Для этого, вам нужно установить Wordless, а он автоматически установит все необходимое, в том числе и WordPress. <a href="https://wordless.readthedocs.io/en/latest/_pages/install/prerequisites.html">Есть официальное руководство</a>, как выполнить такую установку. Однако, мне не удалось пройти этот квест до конца, так как постоянно возникали какие-либо ошибки. Это и послужило поводом написать эту статью.</p>
<p>Другой вариант, который рассматривается в этой статье, сначала устанавливается и настраивается WordPress, а затем добавляется и настраивается Wordless.</p>
<p>Первым делом установим WP-CLI</p>
<h2>WP-CLI</h2>
<p><a href="https://wp-cli.org/">WP-CLI</a> - это интерфейс командной строки для WordPress. С помощью WP-CLI можно обновлять плагины, настраивать многосайтовые установки и многое другое, не используя веб-браузер. На странице <a href="https://developer.wordpress.org/cli/commands/">WP-CLI Commands</a> приведен список всех доступных в настоящее время команд WP-CLI со ссылками на документацию по использованию и подкомандам. На странице <a href="https://make.wordpress.org/cli/handbook/">WP-CLI Handbook</a> находится список полезных руководств и ресурсов по использованию WP-CLI.</p>
<p>С помощью утилиты curl загрузим файл wp-cli.phar, для этого в терминале введем следующее:</p>
<pre><code>curl -O https://raw.githubusercontent.com/wp-cli/builds/gh-pages/phar/wp-cli.phar
</code></pre>
<p>Файл загрузится в 'Домашнюю папку'.</p>
<p>Затем проверим работоспособность файла wp-cli.phar:</p>
<pre><code>php wp-cli.phar --info
</code></pre>
<p>Чтобы использовать WP-CLI из командной строки, набирая команду wp, сделаем файл исполняемым и переместим его куда-нибудь из домашней папки. Например:</p>
<pre><code>chmod +x wp-cli.phar
sudo mv wp-cli.phar /usr/local/bin/wp
</code></pre>
<p>Теперь проверим, как работает WP-CLI:</p>
<pre><code>wp --info
</code></pre>
<p>Будет выведена информация, похожая на эту:</p>
<pre><code>OS:	Linux 5.15.0-52-generic #58~20.04.1-Ubuntu SMP Thu Oct 13 13:09:46 UTC 2022 x86_64
Shell:	/bin/bash
PHP binary:	/usr/bin/php7.4
PHP version:	7.4.3
php.ini used:	/etc/php/7.4/cli/php.ini
MySQL binary:	/usr/bin/mysql
MySQL version:	mysql  Ver 8.0.30-0ubuntu0.20.04.2 for Linux on x86_64 ((Ubuntu))
SQL modes:
WP-CLI root dir:	phar://wp-cli.phar/vendor/wp-cli/wp-cli
WP-CLI vendor dir:	phar://wp-cli.phar/vendor
WP_CLI phar path:	/home/user
WP-CLI packages dir:
WP-CLI cache dir:	/home/user/.wp-cli/cache
WP-CLI global config:
WP-CLI project config:
WP-CLI version:	2.7.1
</code></pre>
<h2>Установка WordPress на localhost</h2>
<p>Загрузите последнюю версию WordPress с <a href="https://wordpress.org/latest.zip">официального сайта</a>, либо его <a href="https://ru.wordpress.org/latest-ru_RU.zip">русифицированную версию</a>.</p>
<p>Распакуйте скачанный архив в <code>Домашнюю папку</code>. В результате появится каталог <code>wordpress</code>, который переименуйте в <code>wp2</code> (имя wp2 короче, чем wordpress).</p>
<p>Для WordPress требуется база данных MySQL. Вы можете проверить, установлена ли MySQL в вашей системе, а также увидеть дополнительную информацию:</p>
<pre><code>sudo service mysql status
</code></pre>
<p>Руководство по установке MySQL находится <a href="https://dev.mysql.com/doc/refman/8.0/en/installing.html">здесь</a>.</p>
<p>После установки MySQL нужно создать базу данных для будущего локального сайта wp2. Войдите в консоль сервера MySQL как root-пользователь:</p>
<pre><code>sudo mysql -u root
</code></pre>
<p>Появится строка с приглашением <code>mysql&gt;</code>, в эту строку введите следующее:</p>
<pre><code class="language-SQL">CREATE DATABASE wp2;
</code></pre>
<p>На сервере MySQL будет создана база данных <code>wp2</code>.</p>
<p>Также, на сервере MySQL создайте пользователя с именем, под которым вы зарегистрированы в вашей операционной системе. Для дальнейших примеров пусть это будет пользователь с именем user:</p>
<pre><code class="language-SQL">CREATE USER user@localhost IDENTIFIED BY '';
</code></pre>
<p>Предоставьте пользователю user привилегии на чтение, вставку, обновление, удаление, создание и изменение во всех таблицах базы данных wp2 с локального хоста:</p>
<pre><code class="language-SQL">GRANT SELECT,INSERT,UPDATE,DELETE,CREATE,DROP,ALTER ON wp2.* TO user@localhost;
</code></pre>
<p>и рекомендуется еще перечитать привилегии:</p>
<pre><code class="language-SQL">FLUSH PRIVILEGES;
</code></pre>
<p>Выйдите из консоли MySQL:</p>
<pre><code>exit
</code></pre>
<p>Запустите на, всякий случай, сервер MySQL:</p>
<pre><code>sudo service mysql start
</code></pre>
<p>Сделайте каталог <code>wp2</code> рабочим:</p>
<pre><code>cd wp2
</code></pre>
<p>Обычно, для установки WordPress на локальный сервер используют LAMPP, XAMPP или что-то еще. Однако, благодаря WP-CLI у нас есть возможность запускать встроенный сервер командой wp server, что мы и сделаем:</p>
<pre><code>wp server
</code></pre>
<p>Должна появиться строка примерно такого вида:</p>
<pre><code>[Fri Oct 28 20:24:07 2022] PHP 7.4.3 Development Server (http://localhost:8080) started
</code></pre>
<ol>
<li>Теперь, откройте браузер и перейдите по ссылке http://localhost:8080. Откроется следующее окно:</li>
</ol>
<p><img src="install-wp-1.png" alt="Установка WordPress. Шаг 1"></p>
<ol start="2">
<li>Нажмите кнопку <code>Вперед!</code> Появится следующее окно, в котором заполните поля согласно скриншоту:</li>
</ol>
<p><img src="install-wp-2.png" alt="Установка WordPress. Шаг 2"></p>
<ol start="3">
<li>Нажмите кнопку <code>Отправить</code>, появится следующее окно:</li>
</ol>
<p><img src="install-wp-3.png" alt="Установка WordPress. Шаг 3"></p>
<ol start="4">
<li>Нажмите кнопку <code>Запустить установку</code>, появится форма, в которой введите название сайта и данные администратора согласно скриншоту:</li>
</ol>
<p><img src="install-wp-4.png" alt="Установка WordPress. Шаг 4"></p>
<ol start="5">
<li>Нажмите кнопку <code>Установить WordPress</code>, появится следующее окно:</li>
</ol>
<p><img src="install-wp-5.png" alt="Установка WordPress. Шаг 5"></p>
<ol start="6">
<li>Нажмите кнопку <code>Войти!</code>. Появится форма ввода пароля, в которую введите данные согласно скриншоту:</li>
</ol>
<p><img src="install-wp-6.png" alt="Установка WordPress. Шаг 6"></p>
<ol start="7">
<li>Нажмите кнопку <code>Войти</code>. Вы войдете в Консоль административной панели WordPress.</li>
</ol>
<p>Можно считать, что WordPress установлен и настроен. Теперь остановите сервер в терминале клавишами <code>Ctrl+C</code> и закройте окно терминала.</p>
<h2>Установка Node, NVM, Yarn, Ruby</h2>
<p>Каждая версия <a href="https://github.com/welaika/wordless_gem">Wordless</a> работает с определенной версией Node. Последний Wordless версии 2.2.0 требует для своей работы Node v14.15.3.</p>
<p>В вашей системе, скорее всего, установлен Node другой версии. Чтобы убедиться в этом, откройте новое окно терминала и введите следующую команду:</p>
<pre><code class="language-Bach">node -v
</code></pre>
<p>будет выведена версия Node, установленная в вашей системе.</p>
<p>Чтобы легко устанавливать и переключаться между различными версиями Node, воспользуйтесь менеджером NVM. Проверьте, установлен ли NVM в вашей системе:</p>
<pre><code class="language-Bash">nvm -v
</code></pre>
<p>Если NVM установлен, то будет показан номер версии, либо будет выдано сообщение, что команда не найдена. Тогда <a href="https://github.com/nvm-sh/nvm/blob/master/README.md#installing-and-updating">установите NVM</a> с помощью утилиты curl:</p>
<pre><code class="language-Bash">curl -o- https://raw.githubusercontent.com/nvm-sh/nvm/v0.39.2/install.sh | bash
</code></pre>
<p>Теперь, с помощью NVM установите Node v14.15.3:</p>
<pre><code class="language-Bash">nvm install 14.15.3
</code></pre>
<p>Указанная версия Node была установлена и сделана рабочей. Более подробно читайте <a href="https://habr.com/ru/company/timeweb/blog/541452/">Управление версиями Node.js и NPM с помощью NVM</a>.</p>
<p>Рекомендуется, также, установить Yarn. Это легко сделать командой NPM:</p>
<pre><code class="language-Bash">npm i -g yarn
</code></pre>
<p>Для того, чтобы установить <a href="https://wordless.readthedocs.io/en/latest/index.html">Wordless</a> требуется язык Ruby. Проверьте наличие этого языка в системе:</p>
<pre><code>ruby -v
</code></pre>
<p>Если язык установлен, то будет выведена запись, похожая на эту:</p>
<pre><code>ruby 2.7.0p0 (2019-12-25 revision 647ee6f091) [x86_64-linux-gnu]
</code></pre>
<p>Если язык не установлен, то будет выведено сообщение, что команда не найдена. Тогда установите Ruby. В Ubuntu это делается так:</p>
<pre><code>sudo apt-get install ruby-full
</code></pre>
<p>Установка для других систем приведена на <a href="https://www.ruby-lang.org/ru/documentation/installation/">этой странице</a>.</p>
<h2>Установка Wordless</h2>
<p>Теперь установите из репозитория Ruby пакет wordless:</p>
<pre><code>sudo gem install wordless
</code></pre>
<p>Сделайте каталог <code>wp2</code> рабочим:</p>
<pre><code>cd wp2
</code></pre>
<p>Установите и активируйте плагин Wordless:</p>
<pre><code>wp plugin install --activate wordless
</code></pre>
<p>Создайте новую тему c именем mytheme:</p>
<pre><code>wp wordless theme create mytheme
</code></pre>
<p>В каталоге <code>/wp2/wp-content/themes</code> будет создан каталог <code>mytheme</code> с только что созданной темой. Сделайте этот каталог рабочим:</p>
<pre><code>cd wp-content/themes/mytheme
</code></pre>
<p>Настройте остальные необходимые инструменты:</p>
<pre><code>yarn install
</code></pre>
<p>Затем, запустите сервер:</p>
<pre><code>yarn run server
</code></pre>
<p>Откроется окно браузера по адресу <code>http://localhost:3000/</code>. Если же открыть сайт по адресу <code>http://localhost:8080/</code>, то данная страница будет стилизована.</p>
<p>Перейти в панель администратора можно по адресу <code>http://localhost:8080/wp-admin/</code> и <code>http://localhost:3000/wp-admin/</code></p>
<p>Пользовательский интерфейс Browsersync: <code>http://localhost:3001</code></p>

      </div>
    </div>
    <footer class="footer"> 
      <div class="footer__content content">
        <div class="footer__contacts" id="contacts"> <a class="footer__email-link" href="mailto:injashkin@gmail.com" title="Написать письмо">
            <svg class="icon icon__undefined" role="img" width="1em" height="1em">
              <use href="/sprite.svg#undefined"></use>
            </svg>
            <div class="footer__email">injashkin@gmail.com</div></a></div>
        <div class="footer__developer"> <a href="http://jinv.ru" target="_blank">Разработка сайта jinv.ru</a></div>
        <div class="footer__copyright-wrap">
          <div class="footer__copyright">jinv.ru © 2019 - 2022</div>
        </div>
      </div>
    </footer><!-- Yandex.Metrika counter -->
<script type="text/javascript">
  (function (d, w, c) {
    (w[c] = w[c] || []).push(function () {
      try {
        w.yaCounter60672532 = new Ya.Metrika({
          id: 60672532,
          clickmap: true,
          trackLinks: true,
          accurateTrackBounce: true,
        });
      } catch (e) {}
    });

    var n = d.getElementsByTagName('script')[0],
      x = 'https://mc.yandex.ru/metrika/watch.js',
      s = d.createElement('script'),
      f = function () {
        n.parentNode.insertBefore(s, n);
      };
    for (var i = 0; i < document.scripts.length; i++) {
      if (document.scripts[i].src === x) {
        return;
      }
    }
    s.type = 'text/javascript';
    s.async = true;
    s.src = x;

    if (w.opera == '[object Opera]') {
      d.addEventListener('DOMContentLoaded', f, false);
    } else {
      f();
    }
  })(document, window, 'yandex_metrika_callbacks');
</script>
<noscript
  ><div>
    <img
      src="https://mc.yandex.ru/watch/60672532"
      style="position: absolute; left: -9999px"
      alt=""
    /></div
></noscript>
<!-- /Yandex.Metrika counter -->

  </body>
</html>