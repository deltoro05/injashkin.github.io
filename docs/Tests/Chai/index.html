<!DOCTYPE html>
<html lang="ru">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="/index.1gfqn1702.css">
    <script defer src="/index.1gfqn1702.js"></script>
    <meta name="description" content="Chai - это библиотека тестирования JavaScript, которая помогает проверить, что после внесения изменений в код программа все еще ведет себя так, как нужно. Используя Chai, можно написать тесты, описывающие требования к программе, и посмотреть, соответствует ли она им.">
    <title>Тестирование кода с помощью библиотеки Chai | jinv.ru</title>
    <link rel="sitemap" type="application/xml" href="/sitemap/sitemap-index.xml">
    <link rel="apple-touch-icon" sizes="57x57" href="images/icons/icon57.png">
    <link rel="apple-touch-icon" sizes="60x60" href="images/icons/icon60.png">
    <link rel="apple-touch-icon" sizes="72x72" href="images/icons/icon72.png">
    <link rel="apple-touch-icon" sizes="76x76" href="images/icons/icon76.png">
    <link rel="apple-touch-icon" sizes="114x114" href="images/icons/icon114.png">
    <link rel="apple-touch-icon" sizes="120x120" href="images/icons/icon120.png">
    <link rel="apple-touch-icon" sizes="144x144" href="images/icons/icon144.png">
    <link rel="apple-touch-icon" sizes="152x152" href="images/icons/icon152.png">
    <link rel="apple-touch-icon" sizes="180x180" href="images/icons/icon180.png">
    <link rel="icon" type="image/png" sizes="192x192" href="images/icons/icon192.png">
    <link rel="icon" href="images/icons/icon16.png" type="image/png" sizes="16x16">
    <link rel="icon" href="images/icons/icon32.png" type="image/png" sizes="32x32">
    <link rel="icon" href="images/icons/icon96.png" type="image/png" sizes="96x96">
    <link rel="manifest" href="/manifest.webmanifest">
    <meta name="msapplication-TileColor" content="#ffffff">
    <meta name="msapplication-TileImage" content="images/icons/icon144.png">
    <meta name="theme-color" content="#ffffff">
  </head>
  <body>
    <header class="header">
      <div class="header__content content">           
        <div class="header__logo">
          <div class="logo">        <a href="/" title="jinv.ru"> 
              <svg class="icon icon__logo" role="img" width="14em" height="5em">
                <use href="/sprite.svg#logo"></use>
              </svg></a></div>
          <div class="logo_mobile"><a href="/" title="jinv.ru"><img src="/images/icon-72x72.png" alt="Логотип сайта jinv.ru"/></a></div>
        </div>
        <nav class="menu" aria-label="Главное меню">   
          <div class="content"> 
            <input id="menu__toggle" type="checkbox"/>
            <label class="menu__btn" for="menu__toggle"><span>   </span></label>
            <ul class="menu__box">
              <li><a class="menu__item" href="/">Главная</a></li>
              <li><a class="menu__item" href="/toc.html">Статьи</a></li>
              <li><a class="menu__item" href="/author.html">Об авторе</a></li>
            </ul>
          </div>
        </nav>
        <div class="theme">
          <select id="theme" name="theme">        
            <option value="auto">Авто      </option>
            <option value="light">Светлая      </option>
            <option value="dark">Темная    </option>
          </select>
        </div>
        <div class="header__contacts">
          <div class="send-mes">
            <div class="soc"><a class="mes-em" href="injashkin@gmail.com" title="Email" target="_blank" rel="nofollow">
                <svg class="icon icon__email" role="img" width="1em" height="1em">
                  <use href="/sprite.svg#email"></use>
                </svg></a><a class="mes-tg" href="https://t.me/jashkin" title="Telegram" target="_blank" rel="nofollow">
                <svg class="icon icon__telegram" role="img" width="1em" height="1em">
                  <use href="/sprite.svg#telegram"></use>
                </svg></a><a class="mes-wa" href="https://api.whatsapp.com/send?phone=79183549497" title="WhatsApp" target="_blank" rel="nofollow">
                <svg class="icon icon__whatsapp" role="img" width="1em" height="1em">
                  <use href="/sprite.svg#whatsapp"></use>
                </svg></a>
            </div>
          </div>
          <div class="contacts">         
            <p> <a href="https://github.com/injashkin/injashkin.github.io">Github</a></p>
          </div>
        </div>
      </div>
    </header>
    <div class="content">
      <div class="article">
        <h1>Тестирование кода с помощью библиотеки Chai</h1>
        <div class="creationDate">Создано: 22-04-2020</div><p>Мне попалась переведенная с английского статья, в которой описываются <a href="https://techrocks.ru/2019/07/12/11-react-testing-tools/">11 инструментов и библиотек для тестирования React-компонентов</a>. Не лишнем будет прочитать ее прежде, чем продолжать читать далее.</p>
<p>Источниками для данной статьи послужили: <a href="https://www.chaijs.com/guide/">chaijs</a>, <a href="https://www.freecodecamp.org/learn/information-security-and-quality-assurance/quality-assurance-and-testing-with-chai/">freecodecamp</a> и <a href="https://ru.nodejs.org/api/assert.html">nodejs</a>.</p>
<p>Chai – это библиотека, предоставляющая различные функции для проверки утверждений. Chai - это библиотека утверждений <a href="https://medium.com/@lucyhackwrench/%D1%87%D1%82%D0%BE-%D1%82%D0%B0%D0%BA%D0%BE%D0%B5-tdd-%D0%B8-bdd-%D0%BD%D0%B0-%D0%BF%D0%B0%D0%BB%D1%8C%D1%86%D0%B0%D1%85-%D0%B8-%D1%87%D1%82%D0%BE-%D0%B4%D0%BE%D0%BB%D0%B6%D0%B5%D0%BD-%D0%B7%D0%BD%D0%B0%D1%82%D1%8C-%D0%BE-%D0%BD%D0%B8%D1%85-%D1%84%D1%80%D0%BE%D0%BD%D1%82%D0%B5%D0%BD%D0%B4%D0%B5%D1%80-701a10e06bb9">BDD/TDD</a> для node и браузера, которая может прекрасно сочетаться с любым тестовым фреймворком JavaScript, например, таким как, <a href="https://mochajs.org">Mocha</a> или <a href="https://jestjs.io/">Jest</a>.</p>
<p>Chai имеет несколько интерфейсов, которые позволяют разработчику выбрать наиболее удобный. Цепочечные стили <a href="https://ru.wikipedia.org/wiki/BDD_(%D0%BF%D1%80%D0%BE%D0%B3%D1%80%D0%B0%D0%BC%D0%BC%D0%B8%D1%80%D0%BE%D0%B2%D0%B0%D0%BD%D0%B8%D0%B5)">BDD</a> обеспечивают выразительный язык и читаемый стиль, в то время как стиль <a href="https://ru.wikipedia.org/wiki/%D0%A0%D0%B0%D0%B7%D1%80%D0%B0%D0%B1%D0%BE%D1%82%D0%BA%D0%B0_%D1%87%D0%B5%D1%80%D0%B5%D0%B7_%D1%82%D0%B5%D1%81%D1%82%D0%B8%D1%80%D0%BE%D0%B2%D0%B0%D0%BD%D0%B8%D0%B5">TDD</a> assert обеспечивает более классическое ощущение.</p>
<p>Пакет Chai устанавливается из npm:</p>
<pre><code>npm install chai
</code></pre>
<p>Поскольку программы становятся все более сложными, вам нужно часто тестировать их, чтобы убедиться, что любой новый код, который вы добавляете, не нарушает первоначальную функциональность программы.</p>
<h2>Изучение работы assert'ов JavaScript</h2>
<p><code>assert.isNull(value, [message])</code> утверждает, что <code>value</code> является <code>null</code>; если это так, возвращает <code>message</code>. Пример:</p>
<pre><code class="language-js">assert.isNull(err, 'никакой ошибки не было');
</code></pre>
<p><code>assert.isNotNull(value, [message])</code> утверждает, что <code>value</code> не является <code>null</code>; если это так, возвращает <code>message</code>. Пример:</p>
<pre><code class="language-js">var tea = 'вкусный чай';
assert.isNotNull(tea, 'отлично, пора пить чай!');
</code></pre>
<p>Во все инструкции assert можно добавить второе необязательное сообщение. Оно будет включено в сообщения об ошибках, если assert не пройдет. Пример:</p>
<pre><code class="language-js">var tea = 'вкусный чай';
assert.isNotNull(tea, 'отлично, пора пить чай!', 'что-то пошло не так');
</code></pre>
<h2>Проверка определения переменной или функции</h2>
<p><code>assert.isDefined(value, [message])</code> утверждает, что <code>value</code> не является <code>undefined</code>.</p>
<pre><code class="language-js">var tea = 'чашка чая';
assert.isDefined(tea, 'чай уже был определен');
</code></pre>
<p><code>assert.isUndefined(value, [message])</code> утверждает, что <code>value</code> не определено.</p>
<pre><code class="language-js">var tea;
assert.isUndefined(tea, 'tea не определен');
</code></pre>
<h2>Использование assert.isOK и assert.isNotOK</h2>
<p><code>assert.isOk(object, [message])</code> будет проверять <code>object</code> на <a href="https://developer.mozilla.org/ru/docs/%D0%A1%D0%BB%D0%BE%D0%B2%D0%B0%D1%80%D1%8C/Truthy">истиное значение</a></p>
<pre><code class="language-js">assert.isOk('everything', 'все в порядке');
assert.isOk(false, 'это не сработает');
</code></pre>
<p><code>assert.isNotOk(object, [message])</code> будет проверять на <a href="https://developer.mozilla.org/ru/docs/%D0%A1%D0%BB%D0%BE%D0%B2%D0%B0%D1%80%D1%8C/Falsy">ложное значение</a>.</p>
<pre><code class="language-js">assert.isNotOk('everything', 'это не сработает');
assert.isNotOk(false, 'это прокатит');
</code></pre>
<h2>Тест на истиность</h2>
<p><code>assert.isTrue(value, [message])</code> будет тестировать на логическое значение true</p>
<pre><code class="language-js">var teaServed = true;
assert.isTrue(teaServed, 'чай уже подан');
</code></pre>
<p>еще примеры</p>
<pre><code class="language-js">assert.isTrue(true, 'тест пройдет с логическим значением true');
assert.isTrue('true', 'тест не пройдет со строковым значением 'true');
assert.isTrue(1, 'тест не пройдет с числовым значением 1');
</code></pre>
<p><code>assert.isNotTrue(value, [message])</code> тест пройдет, если задано что угодно, кроме логического значения true.</p>
<pre><code class="language-js">var tea = 'вкусный чай';
assert.isNotTrue(tea, 'отлично, пора пить чай!');
</code></pre>
<h2>Использование нестрогого равенства и неравенства</h2>
<p><code>assert.equal(actual, expected, [message])</code> утверждает, что объекты actual и expected нестрого равны (<code>==</code>).</p>
<pre><code class="language-js">assert.equal(3, '3', '== преобразует значения в строки');
</code></pre>
<p><code>assert.notEqual(actual, expected, [message])</code> утверждает, что объекты actual и expected нестрого неравны (<code>!=</code>).</p>
<pre><code class="language-js">assert.notEqual(3, 4, 'эти числа не равны');
</code></pre>
<h2>Использование строгого равенства и неравенства</h2>
<p><code>assert.strictEqual(actual, expected, [message])</code> утверждает, что объекты actual и expected строго равны <code>===</code>.</p>
<pre><code class="language-js">assert.strictEqual(true, true, 'эти логические значения строго равны');
</code></pre>
<p><code>assert.notStrictEqual(actual, expected, [message])</code> утверждает, что объекты actual и expected строго неравны <code>!==</code>.</p>
<pre><code class="language-js">assert.notStrictEqual(3, '3', 'не является строгим равенством');
</code></pre>
<h2>Глубокое сравнение с помощью .deepEqual и .notDeepEqual</h2>
<p><code>assert.deepEqual(actual, expected, [message])</code> утверждает, что объекты actual и expected полностью равны.</p>
<pre><code class="language-js">assert.deepEqual({ tea: 'green' }, { tea: 'green' });
</code></pre>
<p><code>assert.notDeepEqual(actual, expected, [message])</code> утверждает, что объекты actual и expected полностью неравны.</p>
<pre><code class="language-js">assert.notDeepEqual({ tea: 'green' }, { tea: 'jasmine' });
</code></pre>
<pre><code class="language-js">assert.deepEqual(
  { a: '1', b: 5 },
  { b: 5, a: '1' },
  'порядок ключей не имеет значения'
);
assert.notDeepEqual(
  { a: [5, 6] },
  { a: [6, 5] },
  'положение элементов массива имеет значение !!'
);
</code></pre>
<h2>Сравнение свойств двух элементов</h2>
<p><code>assert.isAbove(valueToCheck, valueToBeAbove, [message])</code> утверждает, что <code>valueToCheck</code> больше (<code>&gt;</code>), чем <code>valueToBeAbove</code>.</p>
<pre><code class="language-js">assert.isAbove(5, 2, '5 строго больше чем 2');
assert.isAbove(Math.PI, 3, число ПИ больше чем 3);
</code></pre>
<p><code>assert.isBelow(valueToCheck, valueToBeBelow, [message])</code> утверждает, что <code>valueToCheck</code> меньше (<code>&lt;</code>), чем <code>valueToBeBelow</code>.</p>
<pre><code class="language-js">assert.isBelow(3, 6, '3 меньше, чем 6');
</code></pre>
<p><code>assert.isAtMost(valueToCheck, valueToBeAtMost, [message])</code> утверждает, что <code>valueToCheck</code> меньше или равен (<code>&lt;=</code>) <code>valueToBeAtMost</code>.</p>
<pre><code class="language-js">assert.isAtMost(3, 6, '3 меньше или равно 6');
assert.isAtMost(4, 4, '4 меньше или равно 4');
assert.isAtMost('hello'.length, 5);
assert.isAtMost(1 - Math.random(), 1);
</code></pre>
<p><code>assert.isAtLeast(valueToCheck, valueToBeAtLeast, [message])</code> утверждает, что <code>valueToCheck</code> больше или равен (<code>&gt;=</code>) <code>valueToBeAtLeast</code>.</p>
<pre><code class="language-js">assert.isAtLeast(5, 2, '5 больше или равно 2');
assert.isAtLeast(3, 3, '3 больше или равно 3');
</code></pre>
<h2>Проверка на попадание значения в определенный диапазон</h2>
<p><code>assert.approximately(actual, expected, delta, [message])</code> утверждает, что <code>actual</code> равен <code>expected</code>, в пределах диапазона +/- <code>delta</code>.</p>
<pre><code class="language-js">assert.approximately(1.5, 1, 0.5, 'числа в диапазоне');
</code></pre>
<pre><code class="language-js">function weirdNumbers(delta) {
  return 1 + delta - Math.random();
}

assert.approximately(weirdNumbers(0.5), 1, 0.5);
assert.approximately(weirdNumbers(0.2), 1, 0.8);
</code></pre>
<h2>Проверка значения на массив</h2>
<p><code>assert.isArray(value, [message])</code> утверждает, что value является массивом.</p>
<pre><code class="language-js">var menu = ['зеленый', 'чай', 'длинный'];
assert.isArray(menu, 'какой чай нам нужен?');

assert.isArray(
  'isThisAnArray?'.split(''),
  'String.prototype.split() возвращает массив'
);
</code></pre>
<p><code>assert.isNotArray(value, [message])</code> утверждает, что value не является массивом.</p>
<pre><code class="language-js">var menu = 'зеленый|чай|длинный';
assert.isNotArray(menu, 'какой чай нам нужен?');

assert.isNotArray([1, 2, 3].indexOf(2), 'indexOf возвращает число.');
</code></pre>
<h2>Нахождение значения в массиве, строке или объекте</h2>
<p><code>assert.include(haystack, needle, [message])</code> утверждает, что <code>haystack</code> включает в себя <code>needle</code>. Может использоваться для утверждения, что значение содержится в массиве, подстрока содержится в строке или подмножество свойств содержится в объекте.</p>
<pre><code class="language-js">assert.include([1, 2, 3], 2, 'массив содержит значение');
assert.include('лесной', 'лес', 'строка содержит подстроку');
assert.include(
  { foo: 'bar', hello: 'universe' },
  { foo: 'bar' },
  'объект содержит свойство'
);
</code></pre>
<p>Используется строгое равенство (<code>===</code>). Если утверждается, что значение включено в массив, выполняется поиск элемента, строго равного данному значению. Если утверждается подмножество свойств в объекте производится поиск объекта по заданным ключам свойств, проверяя, что каждый из них присутствует и строго равен заданному значению свойства. Например:</p>
<pre><code class="language-js">var obj1 = { a: 1 },
  obj2 = { b: 2 };
assert.include([obj1, obj2], obj1);
assert.include({ foo: obj1, bar: obj2 }, { foo: obj1 });
assert.include({ foo: obj1, bar: obj2 }, { foo: obj1, bar: obj2 });
</code></pre>
<p><code>assert.notInclude(haystack, needle, [message])</code> утверждает, что <code>haystack</code> не включает в себя <code>needle</code>. Может использоваться для утверждения отсутствия значения в массиве, подстроки в строке или подмножества свойств в объекте.</p>
<pre><code class="language-js">assert.notInclude([1, 2, 3], 4, 'массив не содержит значение');
assert.notInclude('foobar', 'baz', 'строка не содержит подстроку');
assert.notInclude(
  { foo: 'bar', hello: 'universe' },
  { foo: 'baz' },
  'объект не содержит свойство'
);
</code></pre>
<h2>Проверка значения на строку</h2>
<p><code>assert.isString(value, [message])</code> утверждает, что <code>value</code> является строкой.</p>
<pre><code class="language-js">var teaOrder = 'чай';
assert.isString(teaOrder, 'размещенный заказ');
</code></pre>
<p><code>assert.isNotString(value, [message])</code> утверждает, что <code>value</code> не является строкой.</p>
<pre><code class="language-js">var teaOrder = 4;
assert.isNotString(teaOrder, 'размещенный заказ');
</code></pre>
<h2>Использование регулярных выражений для проверки строк</h2>
<p><code>assert.match(value, regexp, [message])</code> утверждает, что <code>value</code> соответствует регулярному выражению <code>regexp</code>.</p>
<pre><code class="language-js">assert.match('foobar', /^foo/, 'регулярное выражение совпадает');
</code></pre>
<p><code>assert.notMatch(value, regexp, [message])</code> утверждает, что <code>value</code> не соответствует регулярному выражению <code>regexp</code>.</p>
<pre><code class="language-js">assert.notMatch('foobar', /^foo/, 'регулярное выражение не совпадает');
</code></pre>
<pre><code class="language-js">var formatPeople = function (name, age) {
  return '# name: ' + name + ', age: ' + age + '\n';
};

var regex = /^#\sname\:\s[\w\s]+,\sage\:\s\d+\s?$/;
assert.match(formatPeople('John Doe', 35), regex);
assert.notMatch(formatPeople('Paul Smith III', 'twenty-four'), regex);
</code></pre>
<h2>Проверка наличия свойств у объекта</h2>
<p><code>assert.property(object, property, [message])</code> утверждает, что <code>object</code> имеет прямое или наследуемое свойство <code>property</code>.</p>
<pre><code class="language-js">assert.property({ tea: { green: 'matcha' } }, 'tea');
assert.property({ tea: { green: 'matcha' } }, 'toString');
</code></pre>
<p><code>assert.notProperty(object, property, [message])</code> утверждает, что <code>object</code> не имеет прямого или наследуемого свойства <code>property</code>.</p>
<pre><code class="language-js">assert.notProperty({ tea: { green: 'matcha' } }, 'coffee');
</code></pre>
<h2>Проверка значения на соответствие определенному типу структуры данных</h2>
<p><code>assert.typeOf(value, name, [message])</code> утверждает, что тип <code>value</code> - это <code>name</code>, как определено <code>Object.prototype.toString</code>.</p>
<p>#typeOf утверждает, что тип значения - это заданная строка, определяемая <code>Object.prototype.toString</code>.</p>
<pre><code class="language-js">assert.typeOf({ tea: 'chai' }, 'object', 'мы имеем объект');
assert.typeOf(['chai', 'jasmine'], 'array', 'мы имеем массив');
assert.typeOf('tea', 'string', 'мы имеем строка');
assert.typeOf(/tea/, 'regexp', 'мы имеем регулярное выражение');
assert.typeOf(null, 'null', 'мы имеем нуль');
assert.typeOf(undefined, 'undefined', 'мы имеем undefined');
</code></pre>
<p><code>assert.notTypeOf(value, name, [message])</code> утверждает, что тип <code>value</code> - это не <code>name</code>, как определено <code>Object.prototype.toString</code>.</p>
<pre><code class="language-js">assert.notTypeOf('tea', 'number', 'строки не являются числами');
</code></pre>
<h2>Проверка, является ли объект экземпляром конструктора</h2>
<p><code>assert.instanceOf(object, constructor, [message])</code> утверждает, что <code>object</code> является экземпляром <code>constructor</code>.</p>
<pre><code class="language-js">var Tea = function (name) {
    this.name = name;
  },
  chai = new Tea('chai');

assert.instanceOf(chai, Tea, 'chai является экземпляром tea');
</code></pre>
<p><code>assert.notInstanceOf(object, constructor, [message])</code> утверждает, что <code>object</code> не является экземпляром <code>constructor</code>.</p>
<pre><code class="language-js">var Tea = function (name) {
    this.name = name;
  },
  chai = new String('chai');

assert.notInstanceOf(chai, Tea, 'chai не является экземпляром tea');
</code></pre>
<p>Есть и другие assert'ы, например: <code>.isNaN()</code>, <code>.isBoolean()</code>, и многие другие. Почти все assert'ы в библиотеке chai имеют свой отрицательный аналог - например: <code>.isNotBoolean()</code>. Более полная информация по API assert'ам находится <a href="https://www.chaijs.com/api/assert/">здесь</a>.</p>

      </div>
    </div>
    <footer class="footer"> 
      <div class="footer__content content">
        <div class="footer__contacts" id="contacts"> <a class="footer__email-link" href="mailto:injashkin@gmail.com" title="Написать письмо">
            <svg class="icon icon__undefined" role="img" width="1em" height="1em">
              <use href="/sprite.svg#undefined"></use>
            </svg>
            <div class="footer__email">injashkin@gmail.com</div></a></div>
        <div class="footer__developer"> <a href="http://jinv.ru" target="_blank">Разработка сайта jinv.ru</a></div>
        <div class="footer__copyright-wrap">
          <div class="footer__copyright">jinv.ru © 2019 - 2022</div>
        </div>
      </div>
    </footer><!-- Yandex.Metrika counter -->
<script type="text/javascript">
  (function (d, w, c) {
    (w[c] = w[c] || []).push(function () {
      try {
        w.yaCounter60672532 = new Ya.Metrika({
          id: 60672532,
          clickmap: true,
          trackLinks: true,
          accurateTrackBounce: true,
        });
      } catch (e) {}
    });

    var n = d.getElementsByTagName('script')[0],
      x = 'https://mc.yandex.ru/metrika/watch.js',
      s = d.createElement('script'),
      f = function () {
        n.parentNode.insertBefore(s, n);
      };
    for (var i = 0; i < document.scripts.length; i++) {
      if (document.scripts[i].src === x) {
        return;
      }
    }
    s.type = 'text/javascript';
    s.async = true;
    s.src = x;

    if (w.opera == '[object Opera]') {
      d.addEventListener('DOMContentLoaded', f, false);
    } else {
      f();
    }
  })(document, window, 'yandex_metrika_callbacks');
</script>
<noscript
  ><div>
    <img
      src="https://mc.yandex.ru/watch/60672532"
      style="position: absolute; left: -9999px"
      alt=""
    /></div
></noscript>
<!-- /Yandex.Metrika counter -->

  </body>
</html>