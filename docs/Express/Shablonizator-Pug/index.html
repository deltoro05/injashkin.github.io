<!DOCTYPE html>
<html lang="ru">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="/index.jrg.css">
    <link rel="shortcut icon" href="/favicon.ico">
    <script defer src="/index.js"></script>
    <meta name="description" content="Шаблонизатор Pug позволяет использовать сокращенную html-разметку, а также переменные, циклы, условные операторы. Это дает возможность подставлять динамические данные">
    <title>Шаблонизатор PugJS | jinv.ru</title>
    <link rel="sitemap" type="application/xml" href="/sitemap/sitemap-index.xml">
    <link rel="apple-touch-icon" sizes="57x57" href="images/apple57.png">
    <link rel="apple-touch-icon" sizes="60x60" href="images/apple60.png">
    <link rel="apple-touch-icon" sizes="72x72" href="images/apple72.png">
    <link rel="apple-touch-icon" sizes="76x76" href="images/apple76.png">
    <link rel="apple-touch-icon" sizes="114x114" href="images/apple114.png">
    <link rel="apple-touch-icon" sizes="120x120" href="images/apple120.png">
    <link rel="apple-touch-icon" sizes="144x144" href="images/apple144.png">
    <link rel="apple-touch-icon" sizes="152x152" href="images/apple152.png">
    <link rel="apple-touch-icon" sizes="180x180" href="images/apple180.png">
    <link rel="icon" type="image/png" sizes="192x192" href="images/icon-192.png">
    <link rel="icon" href="images/favicon-16.png" type="image/png" sizes="16x16">
    <link rel="icon" href="images/favicon-32.png" type="image/png" sizes="32x32">
    <link rel="icon" href="images/favicon-96.png" type="image/png" sizes="96x96">
    <link rel="manifest" href="/manifest.webmanifest">
    <meta name="msapplication-TileColor" content="#ffffff">
    <meta name="msapplication-TileImage" content="images/ms-icon-144x144.png">
    <meta name="theme-color" content="#ffffff">
  </head>
  <body>
    <header class="header">
      <div class="header__content content">           
        <div class="header__logo">
          <div class="logo">        <a href="/" title="jinv.ru"> 
              <svg class="icon icon__logo" role="img" width="4em" height="4em">
                <use href="/sprite.svg#logo"></use>
              </svg></a></div>
          <div class="logo-text"> <a href="/" title="jinv.ru">inv.ru</a></div>
          <div class="logo_mobile"><a href="/" title="jinv.ru"><img src="/images/icon-72x72.png" alt="Логотип сайта jinv.ru"/></a></div>
        </div>
        <nav class="menu" aria-label="Главное меню">   
          <div class="content"> 
            <input id="menu__toggle" type="checkbox"/>
            <label class="menu__btn" for="menu__toggle"><span>   </span></label>
            <ul class="menu__box">
              <li><a class="menu__item" href="/">Главная</a></li>
              <li><a class="menu__item" href="/toc.html">Статьи</a></li>
              <li><a class="menu__item" href="/author.html">Об авторе</a></li>
            </ul>
          </div>
        </nav>
        <div class="theme">
          <select id="theme" name="theme">        
            <option value="auto">Авто      </option>
            <option value="light">Светлая      </option>
            <option value="dark">Темная    </option>
          </select>
        </div>
        <div class="header__contacts">
          <div class="send-mes">
            <div class="soc"><a class="mes-em" href="injashkin@gmail.com" title="Email" target="_blank" rel="nofollow">
                <svg class="icon icon__email" role="img" width="1em" height="1em">
                  <use href="/sprite.svg#email"></use>
                </svg></a><a class="mes-tg" href="https://t.me/jashkin" title="Telegram" target="_blank" rel="nofollow">
                <svg class="icon icon__telegram" role="img" width="1em" height="1em">
                  <use href="/sprite.svg#telegram"></use>
                </svg></a><a class="mes-wa" href="https://api.whatsapp.com/send?phone=79183549497" title="WhatsApp" target="_blank" rel="nofollow">
                <svg class="icon icon__whatsapp" role="img" width="1em" height="1em">
                  <use href="/sprite.svg#whatsapp"></use>
                </svg></a>
            </div>
          </div>
          <div class="contacts">         
            <p> <a href="https://github.com/injashkin/injashkin.github.io">Github</a></p>
          </div>
        </div>
      </div>
    </header>
    <div class="content">
      <div class="article">
        <h1>Шаблонизатор PugJS</h1>
        <div class="creationDate">Создано: 01-06-2020</div><p>В приложениях Express для визуализации интерфейса, обычно, используют не стандартные файлы html, а специальные представления (шаблоны), из которых с помощью <strong>движка представлений</strong> (view engine) создаются html-файлы. Движок представлений еще называют <strong>движком шаблонов</strong> (template engine) или <strong>шаблонизатором</strong>, которых для Express написано довольно много: Handlebars, Dust, Pug, Jade, Nunjucks, EJS, и др. Все они функционально похожи и отличаются в небольших деталях. Выбор того или иного движка зависит от личных предпочтений.</p>
<p>Механизм шаблонов позволяет использовать в приложении статические файлы шаблонов (например, написанные на Pug), вместо которых затем вставляется какое-то динамическое содержимое с помощью кода javascript. Во время выполнения переменные в файле шаблона заменяются фактическими значениями, которые могут быть предоставлены вашим сервером. Шаблон преобразуется в статический HTML-файл, который отправляется клиенту. Этот подход упрощает проектирование HTML-страницы и позволяет отображать переменные на странице без необходимости выполнения вызова API от клиента.</p>
<p><a href="https://pugjs.org/api/getting-started.html">Pug</a> - это шаблонизатор и html-препроцессор, написанный на javascript для node.js. Pug имеет целый ряд преимуществ по сравнению с обычным HTML.</p>
<p>Установим пакет шаблонизатора Pug из <a href="https://www.npmjs.com/">npm</a>:</p>
<pre><code>$ npm install pug
</code></pre>
<p>Создададим файл app.js со следующим кодом:</p>
<pre><code class="language-js">const express = require('express');

const app = express();

app.set('view engine', 'pug'); // Указывает, что в качестве шаблонизатора используется Pug

/* Нижеприведенную строку кода можно не писать, так как каталог /views устанавливается по умолчанию. */
app.set('views', './views'); // Указывает на каталог, в котором находятся файлы шаблонов.

app.use('/contact', function (req, res) {
  res.render('contact', {
    //&quot;contact&quot; - это имя файла шаблона в каталоге views
    title: 'Мои номера телефонов',
    phonesVisible: true,
    phones: ['+1234567890', '+9876543210'],
    email: 'tuk@tuk.com',
  });
});

app.use('/', function (req, res) {
  res.send('Главная страница');
});
app.listen(3000);
</code></pre>
<p>Затем добавим в папку <code>views</code> файл <code>contact.pug</code> со следующим кодом:</p>
<pre><code class="language-pug">&lt;!DOCTYPE html&gt;
&lt;html&gt;
&lt;head&gt;
    &lt;title&gt;#{title}&lt;/title&gt; &lt;!-- Для данных внутри html-элементов применяются теги `#{выражение}` --&gt;
    &lt;meta name='viewport', content=&quot;initial-scale=1.0, width=device-width&quot; /&gt;
    &lt;meta charset=&quot;utf-8&quot; /&gt;
&lt;/head&gt;
&lt;body&gt;

    &lt;h1&gt;#{title} в фирме&lt;/h1&gt;

    if phonesVisible
        &lt;h3&gt;Номера телефонов&lt;/h3&gt;
        &lt;ul&gt;
            each phone in phones
                &lt;li&gt;#{phone}&lt;/li&gt;
        &lt;/ul&gt;
    else
        &lt;h3&gt;Телефоны не указаны&lt;/h3&gt;
    &lt;p&gt;Электронный адрес: #{email}&lt;/p&gt;
&lt;/body&gt;
&lt;html&gt;
</code></pre>
<p>В коде выше выражение <code>each phone in phones</code> представляет собой цикл. В нем <code>phone</code> - переменная, а <code>phones</code> - массив. Значения из массива <code>phones</code> с помощью перебора подставляются в переменную <code>phone</code> и выводятся на страницу в виде списка. Также в вышеприведенном коде есть условный оператор <code>if...else</code>, который работает также, как и условный оператор в других языках программирования.</p>
<p>Если теперь запустить проект и обратиться по адресу <code>http://localhost:3000/contact</code> приложение сгенерирует веб-страницу:</p>
<p><img src="screen.png" alt="screen"></p>
<p>Pug позволяет писать с помощью сокращенной html-разметки. Перепишем код в файле <code>contact.pug</code>:</p>
<pre><code class="language-pug">doctype html
html
	head
		title=title
		meta(charset='utf-8')
		meta(name='viewport', content=&quot;initial-scale=1.0, width=device-width&quot;)

	body

		h1 #{title} в фирме

		if phonesVisible
			h3 Номера телефонов
			ul
				each phone in phones
					li=phone

		else
			h3 Телефоны не указаны
		p Электронный адрес: #{email}
</code></pre>

      </div>
    </div>
    <footer class="footer"> 
      <div class="footer__content content">
        <div class="footer__contacts" id="contacts"> <a class="footer__email-link" href="mailto:injashkin@gmail.com" title="Написать письмо">
            <svg class="icon icon__undefined" role="img" width="1em" height="1em">
              <use href="/sprite.svg#undefined"></use>
            </svg>
            <div class="footer__email">injashkin@gmail.com</div></a></div>
        <div class="footer__developer"> <a href="http://jinv.ru" target="_blank">Разработка сайта jinv.ru</a></div>
        <div class="footer__copyright-wrap">
          <div class="footer__copyright">jinv.ru © 2019 - 2022</div>
        </div>
      </div>
    </footer><!-- Yandex.Metrika counter -->
<script type="text/javascript">
  (function (m, e, t, r, i, k, a) {
    m[i] =
      m[i] ||
      function () {
        (m[i].a = m[i].a || []).push(arguments);
      };
    var z = null;
    m[i].l = 1 * new Date();
    for (var j = 0; j < document.scripts.length; j++) {
      if (document.scripts[j].src === r) {
        return;
      }
    }
    (k = e.createElement(t)),
      (a = e.getElementsByTagName(t)[0]),
      (k.async = 1),
      (k.src = r),
      a.parentNode.insertBefore(k, a);
  })(window, document, 'script', 'https://mc.yandex.ru/metrika/tag.js', 'ym');

  ym(60672532, 'init', {
    clickmap: true,
    trackLinks: true,
    accurateTrackBounce: true,
  });
</script>
<noscript
  ><div>
    <img
      src="https://mc.yandex.ru/watch/60672532"
      style="position: absolute; left: -9999px"
      alt=""
    /></div
></noscript>
<!-- /Yandex.Metrika counter -->

  </body>
</html>